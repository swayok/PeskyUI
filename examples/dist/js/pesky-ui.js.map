{"version":3,"file":"pesky-ui.js","sources":["../../src/js/pesky-ui.js","../../src/js/ui/NestedMenu.js"],"sourcesContent":["import $ from 'jquery';\r\n\r\nclass PeskyUI {\r\n\r\n    static get defaultInitializers() {\r\n        return [\r\n            'initLeftSidebar',\r\n            'initRightSidebar',\r\n        ];\r\n    }\r\n\r\n    static get defaults() {\r\n        return {\r\n            //< array of functions to call in constructor (strings - call PeskyUI methods, functions - call custom methods\r\n            initializers: PeskyUI.defaultInitializers,\r\n            leftSidebarSelector: '#left-sidebar',\r\n            rightSidebarSelector: '#right-sidebar',\r\n        };\r\n    }\r\n\r\n    constructor(options) {\r\n        if (options && $.isPlainObject(options)) {\r\n            options = {};\r\n        }\r\n        this.options = $.extend({}, PeskyUI.defaults, options);\r\n\r\n        for (let key in this.options.initializers) {\r\n            let initializer = this.options.initializers[key];\r\n            if (typeof initializer === 'function') {\r\n                initializer.call(this);\r\n            } else {\r\n                this[initializer]();\r\n            }\r\n        }\r\n    }\r\n\r\n    initLeftSidebar() {\r\n        this.$leftSidebar = $(this.options.leftSidebarSelector);\r\n    }\r\n\r\n    initLeftSidebarMenu(menuId) {\r\n        $(menuId).NestedMenu();\r\n    }\r\n\r\n    initRightSidebar() {\r\n        this.$rightSidebar = $(this.options.rightSidebarSelector);\r\n    }\r\n\r\n    uuid4() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n            var r = Math.random() * 16 | 0,\r\n                v = (c === 'x' ? r : (r & 0x3 | 0x8));\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n$(function () {\r\n    window.PeskyUI = new PeskyUI(typeof PeskyUIConfig === 'undefined' ? {} : PeskyUIConfig);\r\n});\r\n\r\nexport default PeskyUI;","const NestedMenu = (($) => {\r\n\r\n    const NAME = 'NestedMenu'\r\n    const DATA_KEY = 'nested-menu'\r\n    const EVENT_KEY = `.${DATA_KEY}`\r\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\r\n\r\n    const Event = {\r\n        SELECTED: `selected${EVENT_KEY}`,\r\n        EXPANDED: `expanded${EVENT_KEY}`,\r\n        COLLAPSED: `collapsed${EVENT_KEY}`,\r\n        LOAD_DATA_API: `load${EVENT_KEY}`\r\n    }\r\n\r\n    const Selector = {\r\n        LI: '.nav-item',\r\n        LINK: '.nav-link',\r\n        NESTED_MENU: '.nav-submenu',\r\n        OPEN: '.menu-open',\r\n        DATA_WIDGET: '[data-widget=\"nested-menu\"]'\r\n    }\r\n\r\n    const ClassName = {\r\n        LI: 'nav-item',\r\n        LINK: 'nav-link',\r\n        NESTED_MENU: 'nav-submenu',\r\n        OPEN: 'menu-open',\r\n    }\r\n\r\n    const Default = {\r\n        animationSpeed: 200,\r\n        accordion: true,\r\n    }\r\n\r\n    /**\r\n     * Class Definition\r\n     * ====================================================\r\n     */\r\n    class NestedMenu {\r\n        constructor(element, config) {\r\n            this._config = config\r\n            this._element = element\r\n            this.init()\r\n        }\r\n\r\n        // Public\r\n\r\n        init() {\r\n            this._setupListeners()\r\n            this._initSubmenus()\r\n        }\r\n\r\n        expand(nestedMenu, parentLi) {\r\n            const expandedEvent = $.Event(Event.EXPANDED)\r\n\r\n            if (this._config.accordion) {\r\n                const openMenuLi = parentLi.siblings(Selector.OPEN).first()\r\n                const openNestedMenu = openMenuLi.find(Selector.NESTED_MENU).first()\r\n                this.collapse(openNestedMenu, openMenuLi)\r\n            }\r\n\r\n            parentLi.addClass(ClassName.OPEN)\r\n            nestedMenu.stop().slideDown(this._config.animationSpeed, () => {\r\n                $(this._element).trigger(expandedEvent)\r\n            })\r\n\r\n        }\r\n\r\n        collapse(nestedMenu, parentLi) {\r\n            const collapsedEvent = $.Event(Event.COLLAPSED)\r\n\r\n            parentLi.removeClass(ClassName.OPEN)\r\n            nestedMenu.stop().slideUp(this._config.animationSpeed, () => {\r\n                $(this._element).trigger(collapsedEvent)\r\n                nestedMenu.find(`${Selector.OPEN} > ${Selector.NESTED_MENU}`).slideUp()\r\n                nestedMenu.find(Selector.OPEN).removeClass(ClassName.OPEN)\r\n            })\r\n        }\r\n\r\n        toggle(event) {\r\n\r\n            const $relativeTarget = $(event.currentTarget)\r\n            const $parent = $relativeTarget.parent()\r\n\r\n            let nestedMenu = $parent.find('> ' + Selector.NESTED_MENU)\r\n\r\n            if (!nestedMenu.is(Selector.NESTED_MENU)) {\r\n\r\n                if (!$parent.is(Selector.LI)) {\r\n                    nestedMenu = $parent.parent().find('> ' + Selector.NESTED_MENU)\r\n                }\r\n\r\n                if (!nestedMenu.is(Selector.NESTED_MENU)) {\r\n                    return\r\n                }\r\n            }\r\n\r\n            event.preventDefault()\r\n\r\n            const parentLi = $relativeTarget.parents(Selector.LI).first()\r\n            const isOpen = parentLi.hasClass(ClassName.OPEN)\r\n\r\n            if (isOpen) {\r\n                this.collapse($(nestedMenu), parentLi)\r\n            } else {\r\n                this.expand($(nestedMenu), parentLi)\r\n            }\r\n        }\r\n\r\n        // Private\r\n\r\n        _setupListeners() {\r\n            $(this._element).on('click', Selector.LINK, (event) => {\r\n                this.toggle(event)\r\n            })\r\n        }\r\n\r\n        _initSubmenus() {\r\n            this._element.find(Selector.NESTED_MENU).slideUp();\r\n        }\r\n\r\n        // Static\r\n\r\n        static _jQueryInterface(config) {\r\n            return this.each(function () {\r\n                let data = $(this).data(DATA_KEY)\r\n                const _options = $.extend({}, Default, $(this).data())\r\n\r\n                if (!data) {\r\n                    data = new NestedMenu($(this), _options)\r\n                    $(this).data(DATA_KEY, data)\r\n                }\r\n\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * jQuery API\r\n     * ====================================================\r\n     */\r\n\r\n    $.fn[NAME] = NestedMenu._jQueryInterface\r\n    $.fn[NAME].Constructor = NestedMenu\r\n    $.fn[NAME].noConflict = function () {\r\n        $.fn[NAME] = JQUERY_NO_CONFLICT\r\n        return NestedMenu._jQueryInterface\r\n    }\r\n\r\n    return NestedMenu\r\n})(jQuery)\r\n\r\nexport default NestedMenu\r\n"],"names":["PeskyUI","defaultInitializers","defaults","initializers","leftSidebarSelector","rightSidebarSelector","constructor","options","$","isPlainObject","extend","key","initializer","call","initLeftSidebar","$leftSidebar","initLeftSidebarMenu","menuId","NestedMenu","initRightSidebar","$rightSidebar","uuid4","replace","c","r","Math","random","v","toString","window","PeskyUIConfig","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","Event","SELECTED","EXPANDED","COLLAPSED","LOAD_DATA_API","Selector","LI","LINK","NESTED_MENU","OPEN","DATA_WIDGET","ClassName","Default","animationSpeed","accordion","element","config","_config","_element","init","_setupListeners","_initSubmenus","expand","nestedMenu","parentLi","expandedEvent","openMenuLi","siblings","first","openNestedMenu","find","collapse","addClass","stop","slideDown","trigger","collapsedEvent","removeClass","slideUp","toggle","event","$relativeTarget","currentTarget","$parent","parent","is","preventDefault","parents","isOpen","hasClass","on","_jQueryInterface","each","data","_options","Constructor","noConflict","jQuery"],"mappings":"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"}