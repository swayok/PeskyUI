{"version":3,"file":"pesky-ui.js","sources":["../../src/js/pesky-ui.js","../../src/js/ui/treeview.js"],"sourcesContent":["import $ from 'jquery';\r\n\r\nclass PeskyUI {\r\n\r\n    static get defaultInitializers() {\r\n        return [\r\n            'initLeftSidebar',\r\n            'initRightSidebar',\r\n        ];\r\n    }\r\n\r\n    static get defaults() {\r\n        return {\r\n            //< array of functions to call in constructor (strings - call PeskyUI methods, functions - call custom methods\r\n            initializers: PeskyUI.defaultInitializers,\r\n            leftSidebarSelector: '#left-sidebar',\r\n            rightSidebarSelector: '#right-sidebar',\r\n        };\r\n    }\r\n\r\n    constructor(options) {\r\n        if (options && $.isPlainObject(options)) {\r\n            options = {};\r\n        }\r\n        this.options = $.extend({}, PeskyUI.defaults, options);\r\n\r\n        for (let key in this.options.initializers) {\r\n            let initializer = this.options.initializers[key];\r\n            if (typeof initializer === 'function') {\r\n                initializer.call(this);\r\n            } else {\r\n                this[initializer]();\r\n            }\r\n        }\r\n    }\r\n\r\n    initLeftSidebar() {\r\n        this.$leftSidebar = $(this.options.leftSidebarSelector);\r\n    }\r\n\r\n    initLeftSidebarMenu(menuId) {\r\n        $(menuId).Treeview();\r\n    }\r\n\r\n    initRightSidebar() {\r\n        this.$rightSidebar = $(this.options.rightSidebarSelector);\r\n    }\r\n\r\n    uuid4() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n            var r = Math.random() * 16 | 0,\r\n                v = (c === 'x' ? r : (r & 0x3 | 0x8));\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n$(function () {\r\n    window.PeskyUI = new PeskyUI(typeof PeskyUIConfig === 'undefined' ? {} : PeskyUIConfig);\r\n});\r\n\r\nexport default PeskyUI;","const Treeview = (($) => {\r\n\r\n    const NAME = 'Treeview'\r\n    const DATA_KEY = 'treeview'\r\n    const EVENT_KEY = `.${DATA_KEY}`\r\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\r\n\r\n    const Event = {\r\n        SELECTED: `selected${EVENT_KEY}`,\r\n        EXPANDED: `expanded${EVENT_KEY}`,\r\n        COLLAPSED: `collapsed${EVENT_KEY}`,\r\n        LOAD_DATA_API: `load${EVENT_KEY}`\r\n    }\r\n\r\n    const Selector = {\r\n        LI: '.nav-item',\r\n        LINK: '.nav-link',\r\n        TREEVIEW_MENU: '.nav-submenu',\r\n        OPEN: '.menu-open',\r\n        DATA_WIDGET: '[data-widget=\"treeview\"]'\r\n    }\r\n\r\n    const ClassName = {\r\n        LI: 'nav-item',\r\n        LINK: 'nav-link',\r\n        TREEVIEW_MENU: 'nav-submenu',\r\n        OPEN: 'menu-open',\r\n    }\r\n\r\n    const Default = {\r\n        trigger: `${Selector.DATA_WIDGET} ${Selector.LINK}`,\r\n        animationSpeed: 300,\r\n        accordion: true,\r\n    }\r\n\r\n    /**\r\n     * Class Definition\r\n     * ====================================================\r\n     */\r\n    class Treeview {\r\n        constructor(element, config) {\r\n            this._config = config\r\n            this._element = element\r\n        }\r\n\r\n        // Public\r\n\r\n        init() {\r\n            console.log('treeview init');\r\n            this._setupListeners()\r\n        }\r\n\r\n        expand(treeviewMenu, parentLi) {\r\n            const expandedEvent = $.Event(Event.EXPANDED)\r\n\r\n            if (this._config.accordion) {\r\n                const openMenuLi = parentLi.siblings(Selector.OPEN).first()\r\n                const openTreeview = openMenuLi.find(Selector.TREEVIEW_MENU).first()\r\n                this.collapse(openTreeview, openMenuLi)\r\n            }\r\n\r\n            treeviewMenu.stop().slideDown(this._config.animationSpeed, () => {\r\n                parentLi.addClass(ClassName.OPEN)\r\n                $(this._element).trigger(expandedEvent)\r\n            })\r\n\r\n        }\r\n\r\n        collapse(treeviewMenu, parentLi) {\r\n            const collapsedEvent = $.Event(Event.COLLAPSED)\r\n\r\n            treeviewMenu.stop().slideUp(this._config.animationSpeed, () => {\r\n                parentLi.removeClass(ClassName.OPEN)\r\n                $(this._element).trigger(collapsedEvent)\r\n                treeviewMenu.find(`${Selector.OPEN} > ${Selector.TREEVIEW_MENU}`).slideUp()\r\n                treeviewMenu.find(Selector.OPEN).removeClass(ClassName.OPEN)\r\n            })\r\n        }\r\n\r\n        toggle(event) {\r\n\r\n            const $relativeTarget = $(event.currentTarget)\r\n            const $parent = $relativeTarget.parent()\r\n\r\n            let treeviewMenu = $parent.find('> ' + Selector.TREEVIEW_MENU)\r\n\r\n            if (!treeviewMenu.is(Selector.TREEVIEW_MENU)) {\r\n\r\n                if (!$parent.is(Selector.LI)) {\r\n                    treeviewMenu = $parent.parent().find('> ' + Selector.TREEVIEW_MENU)\r\n                }\r\n\r\n                if (!treeviewMenu.is(Selector.TREEVIEW_MENU)) {\r\n                    return\r\n                }\r\n            }\r\n\r\n            event.preventDefault()\r\n\r\n            const parentLi = $relativeTarget.parents(Selector.LI).first()\r\n            const isOpen = parentLi.hasClass(ClassName.OPEN)\r\n\r\n            if (isOpen) {\r\n                this.collapse($(treeviewMenu), parentLi)\r\n            } else {\r\n                this.expand($(treeviewMenu), parentLi)\r\n            }\r\n        }\r\n\r\n        // Private\r\n\r\n        _setupListeners() {\r\n            $(document).on('click', this._config.trigger, (event) => {\r\n                this.toggle(event)\r\n            })\r\n        }\r\n\r\n        // Static\r\n\r\n        static _jQueryInterface(config) {\r\n            return this.each(function () {\r\n                let data = $(this).data(DATA_KEY)\r\n                const _options = $.extend({}, Default, $(this).data())\r\n\r\n                if (!data) {\r\n                    data = new Treeview($(this), _options)\r\n                    $(this).data(DATA_KEY, data)\r\n                }\r\n\r\n                if (config === 'init') {\r\n                    data[config]()\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Data API\r\n     * ====================================================\r\n     */\r\n\r\n    $(window).on(Event.LOAD_DATA_API, () => {\r\n        $(Selector.DATA_WIDGET).each(function () {\r\n            Treeview._jQueryInterface.call($(this), 'init')\r\n        })\r\n    })\r\n\r\n    /**\r\n     * jQuery API\r\n     * ====================================================\r\n     */\r\n\r\n    $.fn[NAME] = Treeview._jQueryInterface\r\n    $.fn[NAME].Constructor = Treeview\r\n    $.fn[NAME].noConflict = function () {\r\n        $.fn[NAME] = JQUERY_NO_CONFLICT\r\n        return Treeview._jQueryInterface\r\n    }\r\n\r\n    return Treeview\r\n})(jQuery)\r\n\r\nexport default Treeview\r\n"],"names":["PeskyUI","defaultInitializers","defaults","initializers","leftSidebarSelector","rightSidebarSelector","constructor","options","$","isPlainObject","extend","key","initializer","call","initLeftSidebar","$leftSidebar","initLeftSidebarMenu","menuId","Treeview","initRightSidebar","$rightSidebar","uuid4","replace","c","r","Math","random","v","toString","window","PeskyUIConfig","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","Event","SELECTED","EXPANDED","COLLAPSED","LOAD_DATA_API","Selector","LI","LINK","TREEVIEW_MENU","OPEN","DATA_WIDGET","ClassName","Default","trigger","animationSpeed","accordion","element","config","_config","_element","init","console","log","_setupListeners","expand","treeviewMenu","parentLi","expandedEvent","openMenuLi","siblings","first","openTreeview","find","collapse","stop","slideDown","addClass","collapsedEvent","slideUp","removeClass","toggle","event","$relativeTarget","currentTarget","$parent","parent","is","preventDefault","parents","isOpen","hasClass","document","on","_jQueryInterface","each","data","_options","Constructor","noConflict","jQuery"],"mappings":"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"}